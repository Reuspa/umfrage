<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button  text="zurÃ¼ck"></ion-back-button>
    </ion-buttons>
    <ion-title>{{title}}</ion-title>
    <ion-fab *ngIf="admin" vertical="center" horizontal="end" slot="start">
      <ion-fab-button>
        <ion-icon name="create"></ion-icon>
      </ion-fab-button>
      <ion-fab-list side="start">
        <ion-fab-button color="danger" (click)="actionSheet()"><ion-icon name="trash"></ion-icon></ion-fab-button>
        <ion-fab-button (click)="adminFlag()"><ion-icon name="create"></ion-icon></ion-fab-button>
        <ion-fab-button (click)="actionSheet()"><ion-icon name="add"></ion-icon></ion-fab-button>
      </ion-fab-list>
    </ion-fab>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-grid>
    <ion-row>
      <ion-col size="12">
        <ion-list lines="full">
          <ion-item>
            <ion-label>Title: </ion-label>
            <ion-input [readonly]="!admin" [(ngModel)]="survey.name"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label  position="floating">Beschreibung: </ion-label>
            <ion-textarea [readonly]="!admin" [(ngModel)]="survey.description"></ion-textarea>
          </ion-item>
          <ion-item>
            <ion-label>Bis zum:</ion-label>
            <ion-datetime [readonly]="!admin" display-format="DD/MM/YYYY" min="2020" max="2022" [(ngModel)]="survey.lastDate"></ion-datetime>
          </ion-item>
        </ion-list>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-item-divider color="white" no-lines></ion-item-divider>
    </ion-row>
  <div [ngSwitch]="view">
    <div *ngSwitchCase="0">
      <ion-item-divider color="primary" no-lines>Fragen:</ion-item-divider>
      <div *ngFor="let count of questionTemp; let idx = index">
          <ion-row>
            <ion-col size="10">
              <ion-item lines ="full">
                <ion-input [readonly]="!admin" type="text" [(ngModel)]="questionTemp[idx].question" placeholder=" Frage">{{idx + 1}}.</ion-input>
              </ion-item>
            </ion-col>
            <ion-col>
              <ion-fab *ngIf="admin">
                <ion-fab-button><ion-icon name="create"></ion-icon></ion-fab-button>
                <ion-fab-list side="start">
                  <ion-fab-button color="danger" (click)="removeQuestion(idx)"><ion-icon name="trash"></ion-icon></ion-fab-button>
                  <ion-fab-button color="danger" (click)="removeAnswers(idx)" ><ion-icon name="backspace"></ion-icon></ion-fab-button>
                  <ion-fab-button color="primary" (click)="addAnswers(idx)"><ion-icon name="add"></ion-icon></ion-fab-button>
                </ion-fab-list>
              </ion-fab>
            </ion-col>
          </ion-row>
            <ion-list [ngSwitch]="questionTemp[idx].mode">
              <div *ngSwitchCase="2">
                <ion-item *ngFor="let count of questionTemp[idx].answers; let idy = index" lines ="full">
                  <ion-input *ngIf="admin" [(ngModel)]="questionTemp[idx].answers[idy].name" placeholder="Antwort"></ion-input>
                  <ion-label *ngIf="!admin">{{idy +1}}. {{questionTemp[idx].answers[idy].name}}</ion-label>
                  <ion-checkbox *ngIf="!admin" slot="end" [(ngModel)]="questionTemp[idx]['answers'][idy].answer"></ion-checkbox>
                </ion-item>
            </div>
            <div *ngSwitchCase="3">
              <ion-radio-group [(ngModel)]="questionTemp[idx].answer">
                <ion-item *ngFor="let count of questionTemp[idx].answers; let idy = index" lines ="full">
                  <ion-input *ngIf="admin" [(ngModel)]="questionTemp[idx].answers[idy].name" placeholder="Antwort"></ion-input>
                  <ion-label *ngIf="!admin">{{idy +1}}. {{questionTemp[idx].answers[idy].name}}</ion-label>
                  <ion-radio *ngIf="!admin" mode="md" slot="end" [value]="questionTemp[idx].answers[idy].name"></ion-radio>
                </ion-item>
              </ion-radio-group>
            </div>
            <div *ngSwitchDefault></div>
            </ion-list>
            <ion-row>
              <ion-item-divider color="white" no-lines></ion-item-divider>
            </ion-row>
      </div>
    </div> 
    <div *ngSwitchCase="1">
      <ion-item-divider color="primary" no-lines>Ergebnisse:</ion-item-divider>
      <div *ngFor="let item of this.finalsResults | keyvalue; let idx = index">
        <ion-row>
          <ion-col size="10">
            <ion-item lines ="full">
              <ion-label>{{idx + 1}}. {{item.key}}</ion-label>
            </ion-item>
          </ion-col>
        </ion-row>

        <ion-item *ngFor="let count of this.finalsResults[item.key]; let idy = index" lines ="full">
              <ion-label>{{idy + 1}}. {{count.key}}</ion-label>
              <ion-label class="alignme">{{count.value}}</ion-label>
        </ion-item>
        <ion-item-divider color="white" no-lines></ion-item-divider>
      </div>
    </div>
  </div>
</ion-grid>
</ion-content>

<ion-footer>
  <!-- <ion-button *ngIf="admin" (click)="actionSheet()" expand="block">
    <ion-icon name="add-circle-outline"></ion-icon>
  </ion-button> -->
  <ion-button (click)="save()" expand="block">
    <ion-icon name="save"></ion-icon>
  </ion-button>
  <ion-button *ngIf="!admin" (click)="viewChange()" expand="block">
    <ion-icon name="eye"></ion-icon>
  </ion-button>
  <!-- <ion-button *ngIf="!new" (click)="updateSurvey()" expand="block">
    <ion-icon name="save"></ion-icon>
  </ion-button> -->

  <ion-item-divider>Admin</ion-item-divider>
  <ion-button (click)="viewChange()"> ViewChange </ion-button>
  <ion-button (click)="ResultTest()"> ResultTest </ion-button>
  <ion-button (click)="Log()"> Log </ion-button>
  <ion-button (click)="adminFlag()"> admin </ion-button>
  <ion-button (click)="actionSheet()"> datatest </ion-button>
</ion-footer>
