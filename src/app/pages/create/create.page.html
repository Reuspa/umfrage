<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button  text="zurÃ¼ck"></ion-back-button>
    </ion-buttons>
    <ion-title>{{title}}</ion-title>
    <ion-fab vertical="center" horizontal="end" slot="start">
      <ion-fab-button>
        <ion-icon name="apps"></ion-icon>
      </ion-fab-button>
      <ion-fab-list side="start">
        <ion-fab-button color="danger" (click)="deleteSurvey()"><ion-icon name="trash"></ion-icon></ion-fab-button>
        <ion-fab-button (click)="logOut()"><ion-icon name="create"></ion-icon></ion-fab-button>

        <!-- <ion-fab-button (click)="viewChange()"><ion-icon name="eye"></ion-icon></ion-fab-button> -->
      </ion-fab-list>
    </ion-fab>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-grid>
    <ion-row>
      <ion-col size="12">
        <ion-list lines="full">
          <ion-item>
            <ion-label>Title: </ion-label>
            <ion-input [readonly]="!flags.editierbar" [(ngModel)]="survey.name"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label  position="floating">Beschreibung: </ion-label>
            <ion-textarea [readonly]="!flags.editierbar" [(ngModel)]="survey.description"></ion-textarea>
          </ion-item>
          <ion-item>
            <ion-label>Zeitraum:</ion-label>
          </ion-item>
          <ion-item>
            <ion-label> von: </ion-label>
          <ion-datetime [readonly]="!flags.editierbar" display-format="DD/MM/YYYY-HH:mm" min="2020" max="2022" [(ngModel)]="survey.dateStart"></ion-datetime>
        </ion-item>
        <ion-item>
        <ion-label> bis: </ion-label>
            <ion-datetime [readonly]="!flags.editierbar" display-format="DD/MM/YYYY-HH:mm" min="2020" max="2022" [(ngModel)]="survey.dateEnd"></ion-datetime>
          </ion-item>
        </ion-list>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-item-divider color="white" no-lines></ion-item-divider>
    </ion-row>
  <div [ngSwitch]="flags.view">
    <div *ngSwitchCase= 0 >
      <ion-item color="primary" no-lines>Fragen:</ion-item>
      <div *ngFor="let count of questionTemp; let idx = index">
          <ion-row>
            <ion-col size="12">
              <ion-item lines ="full">
                <ion-input [readonly]="!flags.editierbar" type="text" [(ngModel)]="questionTemp[idx].question" placeholder=" Frage">{{idx + 1}}.</ion-input>
                <ion-button *ngIf="flags.editierbar" color ="medium" (click)="removeQuestion(idx)" slot ="end"><ion-icon name="backspace"></ion-icon></ion-button>
              </ion-item>
            </ion-col>
            <!-- <ion-col>
              <ion-fab *ngIf="flags.admin">
                <ion-fab-button><ion-icon name="create"></ion-icon></ion-fab-button>
                <ion-fab-list side="start">
                  <ion-fab-button color="danger" (click)="removeQuestion(idx)"><ion-icon name="trash"></ion-icon></ion-fab-button>
                  <ion-fab-button color="danger" (click)="removeAnswers(idx)" ><ion-icon name="backspace"></ion-icon></ion-fab-button>
                  <ion-fab-button color="primary" (click)="addAnswers(idx)"><ion-icon name="add"></ion-icon></ion-fab-button>
                </ion-fab-list>
              </ion-fab>
            </ion-col> -->
          </ion-row>
            <ion-list [ngSwitch]="questionTemp[idx].mode">
              <div *ngSwitchCase="2">
                <ion-item *ngFor="let count of questionTemp[idx].answers; let idy = index" lines ="full">
                  <ion-input *ngIf="flags.editierbar" [(ngModel)]="questionTemp[idx].answers[idy].name" placeholder="Antwort">{{idy +1}}. </ion-input>
                  <ion-label *ngIf="!flags.editierbar">{{idy +1}}. {{questionTemp[idx].answers[idy].name}}</ion-label>
                  <ion-checkbox *ngIf="!flags.editierbar" slot="end" [(ngModel)]="questionTemp[idx]['answers'][idy].answer"></ion-checkbox>
                </ion-item>
            </div>
            <div *ngSwitchCase="3">
              <ion-radio-group [(ngModel)]="questionTemp[idx].answer">
                <ion-item *ngFor="let count of questionTemp[idx].answers; let idy = index" lines ="full">
                  <ion-input *ngIf="flags.editierbar" [(ngModel)]="questionTemp[idx].answers[idy].name" placeholder="Antwort">{{idy +1}}. </ion-input>
                  <ion-label *ngIf="!flags.editierbar">{{idy +1}}. {{questionTemp[idx].answers[idy].name}}</ion-label>
                  <ion-radio *ngIf="!flags.editierbar" mode="md" slot="end" [value]="questionTemp[idx].answers[idy].name">{{idy +1}}. </ion-radio>
                </ion-item>
              </ion-radio-group>
            </div>
              <div *ngSwitchDefault></div>
              <ion-item style="text-align:center" *ngIf="flags.editierbar" lines = "full" text-center>
                <ion-button color ="success" (click)="addAnswers(idx)" slot ="end"><ion-icon name="add"></ion-icon></ion-button>
                <ion-button color ="medium" (click)="removeAnswers(idx)" slot ="end"><ion-icon name="backspace"></ion-icon></ion-button>
              </ion-item>
            </ion-list>
            <ion-row>
              <ion-item-divider color="white" no-lines></ion-item-divider>
            </ion-row>
      </div>
    </div> 

    <div *ngSwitchCase= 1>
      <ion-item-divider color="primary" no-lines>Ergebnisse:</ion-item-divider>
      <div *ngFor="let item of this.finalsResults | keyvalue; let idx = index">
        <ion-row>
          <ion-col size="10">
            <ion-item lines ="full">
              <ion-label>{{idx + 1}}. {{item.key}}</ion-label>
            </ion-item>
          </ion-col>
        </ion-row>

        <ion-item *ngFor="let count of this.finalsResults[item.key]; let idy = index" lines ="full">
              <ion-label>{{idy + 1}}. {{count.key}}</ion-label>
              <ion-label class="alignme">{{count.value}}</ion-label>
        </ion-item>
        <ion-item-divider color="white" no-lines></ion-item-divider>
      </div>
    </div>
  </div>
</ion-grid>
<ion-item-divider color="white"></ion-item-divider>
</ion-content>

<ion-footer>
  <!-- <ion-button *ngIf="admin" (click)="actionSheet()" expand="block">
    <ion-icon name="add-circle-outline"></ion-icon>
  </ion-button> -->
  <div [ngSwitch]="flags.view">
    <div  *ngSwitchCase = 0 >
      <ion-fab  vertical = "bottom" horizontal ="start" slot ="fixed">
        <!-- <ion-fab-button color = "primary">
          <ion-icon name="save"></ion-icon>
        </ion-fab-button> -->
        <!-- <ion-fab-list side="top"> -->
          <ion-fab-button *ngIf = "flags.editierbar && !flags.nichtOffen" color="primary" (click)="save()"><ion-icon name="save"></ion-icon></ion-fab-button>
          <ion-fab-button *ngIf = "flags.nichtOffen" color="medium" (click)="publish()"><ion-icon name="alarm"></ion-icon></ion-fab-button>
          <ion-fab-button *ngIf = "flags.laufend && flags.admin" color="danger" (click)="beenden()"><ion-icon name="alert"></ion-icon></ion-fab-button>
        <!-- </ion-fab-list> -->
      </ion-fab>
      <ion-fab *ngIf="flags.editierbar" vertical = "bottom" horizontal ="end" slot ="fixed">
          <ion-fab-button color="success" (click)="fragenArtAuswahl()"><ion-icon name="add"></ion-icon></ion-fab-button>
      </ion-fab>
    </div>
    <div  *ngSwitchCase="0">
  </div>
  </div>
  <!-- <ion-button *ngIf="!admin" (click)="viewChange()" expand="block">
    <ion-icon name="eye"></ion-icon>
  </ion-button> -->
  <!-- <ion-button *ngIf="!new" (click)="updateSurvey()" expand="block">
    <ion-icon name="save"></ion-icon>
  </ion-button> -->

  <!-- <ion-item-divider>Admin</ion-item-divider>
  <ion-button (click)="viewChange()"> ViewChange </ion-button>
  <ion-button (click)="ResultTest()"> ResultTest </ion-button>
  <ion-button (click)="Log()"> Log </ion-button>
  <ion-button (click)="adminFlag()"> admin </ion-button>
  <ion-button (click)="actionSheet()"> datatest </ion-button> -->
</ion-footer>
